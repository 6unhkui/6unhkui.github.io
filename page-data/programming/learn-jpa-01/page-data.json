{"componentChunkName":"component---src-templates-post-js","path":"/programming/learn-jpa-01","result":{"data":{"site":{"siteMetadata":{"author":"Inkyung"}},"markdownRemark":{"fields":{"slug":"/programming/learn-jpa-01"},"id":"7d3d5df9-2349-5d77-98de-3f6501890d3c","excerpt":"ìë°” ORM í‘œì¤€ JPA í”„ë¡œê·¸ë˜ë°ì„ ì½ê³  ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤. ì„œë¡  JPAì˜ entity classì— ì—´ê±°í˜•ìœ¼ë¡œ ì •ì˜ëœ ê°’ì„  ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ì €ì¥í•  ê²½ìš° ì˜µì…˜ì— ë”°ë¥¸ ì„ íƒì§€ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.  : ìƒìˆ˜ê°€ ì •ì˜ëœ ìˆœì„œê°€ ì €ì¥ëœë‹¤. enumâ€¦","html":"<blockquote>\n<p> <span role=\"img\" aria-label=\"pushpin\">ğŸ“Œ</span> ê¹€ì˜í•œë‹˜ì˜ [ìë°” ORM í‘œì¤€ JPA í”„ë¡œê·¸ë˜ë°]ì„ ì½ê³  ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.</p>\n</blockquote>\n<h1 id=\"ì„œë¡ \" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%A1%A0\" aria-label=\"ì„œë¡  permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì„œë¡ </h1>\n<p>JPAì˜ entity classì— ì—´ê±°í˜•ìœ¼ë¡œ ì •ì˜ëœ ê°’ì„ <code class=\"language-text\">@Enumerated</code> ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ì €ì¥í•  ê²½ìš° ì˜µì…˜ì— ë”°ë¥¸ ì„ íƒì§€ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.</p>\n<ul>\n<li><code class=\"language-text\">EnumType.ORDINAL</code> : ìƒìˆ˜ê°€ ì •ì˜ëœ ìˆœì„œê°€ ì €ì¥ëœë‹¤. enumì˜ ê°’ì´ ì¶”ê°€ë  ê²½ìš°, ì—ëŸ¬ ë°œìƒì˜ ê°€ëŠ¥ì„±ì´ í¬ë¯€ë¡œ EnumType.STRINGì„ ì‚¬ìš© í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.</li>\n<li><code class=\"language-text\">EnumType.STRING</code> : ìƒìˆ˜ ì´ë¦„ ê·¸ëŒ€ë¡œ ë¬¸ìì—´ ì»¬ëŸ¼ì— ì €ì¥ëœë‹¤</li>\n</ul>\n<p>í•˜ì§€ë§Œ <code class=\"language-text\">EnumType.STRING</code> ì—­ì‹œë„ ìƒìˆ˜ì˜ ì´ë¦„ì´ ë³€ê²½ë˜ë©´ ê¸°ì¡´ DB ë°ì´í„°ì™€ ë§¤í•‘ë˜ì§€ ì•ŠëŠ” ì´ìŠˆê°€ ë°œìƒëœë‹¤.<br/>\në˜í•œ ìƒìˆ˜ ê°’ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ë¬¸ìì—´ ê·¸ëŒ€ë¡œ ì €ì¥í•  ê²½ìš°, ì“¸ë°ì—†ëŠ” ë°ì´í„° ê³µê°„ì˜ ë‚­ë¹„ê°€ ë°œìƒë˜ë¯€ë¡œ ì„±ëŠ¥ì— ì¢‹ì§€ ëª»í•œ ë°©ë²•ì´ë‹¤.</p>\n<h1 id=\"attributeconverter-ì‚¬ìš©í•˜ê¸°\" style=\"position:relative;\"><a href=\"#attributeconverter-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"attributeconverter ì‚¬ìš©í•˜ê¸° permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AttributeConverter ì‚¬ìš©í•˜ê¸°</h1>\n<p>JPAì—ì„œëŠ” JDBC íƒ€ì…ì„ ìë°” í´ë˜ìŠ¤ì— ì‰½ê²Œ ë§¤í•‘ í•  ìˆ˜ ìˆë„ë¡ <code class=\"language-text\">AttributeConverter</code> ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•´ì¤€ë‹¤.</p>\n<ol>\n<li>enum ìƒì„±</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">enum</span> <span class=\"token class-name\">UserRole</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">USER</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">MANAGER</span><span class=\"token punctuation\">(</span><span class=\"token number\">99</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> value<span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">UserRole</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">UserRole</span> <span class=\"token function\">findByValue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Arrays</span><span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">UserRole</span><span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                     <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>v <span class=\"token operator\">-></span> v<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> value<span class=\"token punctuation\">)</span>\n                     <span class=\"token punctuation\">.</span><span class=\"token function\">findAny</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">orElse</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"2\">\n<li>AttributeConverter ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Convert</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserRoleConverter</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">AttributeConverter</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">UserRole</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Integer</span> <span class=\"token function\">convertToDatabaseColumn</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">UserRole</span> attribute<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>attribute <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> attribute<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">UserRole</span> <span class=\"token function\">convertToEntityAttribute</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span> dbData<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>dbData <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">UserRole</span><span class=\"token punctuation\">.</span><span class=\"token function\">findByValue</span><span class=\"token punctuation\">(</span>dbData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"3\">\n<li>entityì—ì„œ ì‚¬ìš©í•˜ê¸°</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span> \n<span class=\"token annotation punctuation\">@NoArgsConstructor</span><span class=\"token punctuation\">(</span>access <span class=\"token operator\">=</span> PROTECTED<span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@Getter</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">BaseEntity</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    <span class=\"token annotation punctuation\">@Convert</span><span class=\"token punctuation\">(</span>converter <span class=\"token operator\">=</span> <span class=\"token class-name\">UserRoleConverter</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">UserRole</span> role<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"ì°¸ê³ \" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"ì°¸ê³  permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì°¸ê³ </h1>\n<ul>\n<li><a href=\"https://www.baeldung.com/jpa-persisting-enums-in-jpa\" target=\"_blank\" rel=\"noreferrer\">Baeldung</a></li>\n</ul>","tableOfContents":"<ul>\n<li><a href=\"/programming/learn-jpa-01/#%EC%84%9C%EB%A1%A0\">ì„œë¡ </a></li>\n<li><a href=\"/programming/learn-jpa-01/#attributeconverter-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\">AttributeConverter ì‚¬ìš©í•˜ê¸°</a></li>\n<li><a href=\"/programming/learn-jpa-01/#%EC%B0%B8%EA%B3%A0\">ì°¸ê³ </a></li>\n</ul>","frontmatter":{"title":"JPA","date":"August 09, 2020","category":"JPA","tags":["Java","JPA"],"featuredImage":{"childImageSharp":{"original":{"src":"/static/thumbnail-75af4c51e191774b88def1fe4a619554.png","width":1300,"height":400}}}}}},"pageContext":{"slug":"/programming/learn-jpa-01","previous":{"id":"8762191f-28f8-5670-945c-0d2e6a273104","fields":{"slug":"/programming/jpa-attribute-converter"},"frontmatter":{"title":"AttributeConverterë¥¼ ì´ìš©í•´ ë°ì´í„° íƒ€ì…ì„ ë³€í™˜í•˜ì—¬ ì €ì¥í•˜ê¸°","tags":["Java","JPA"]}},"next":null}}}